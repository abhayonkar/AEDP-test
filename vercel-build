#!/bin/bash

# Exit immediately if a command exits with a non-zero status.
set -e

# Log a message to the Vercel build console
echo "--- Installing build dependencies for ReportLab (with Freetype) ---"

# Use yum to install the C compiler, Python development headers,
# and Freetype development headers. Freetype is crucial for compiling
# the graphics-related parts of ReportLab (_renderPM).
yum install -y gcc python3-devel freetype-devel

# Log another message
echo "--- Collecting Django Static Files ---"

# Run the collectstatic command.
python3.12 manage.py collectstatic --noinput --clear
